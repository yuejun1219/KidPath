<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Retro Game Password Gate -->
    <script>
      (function () {
        var KEY = 'kidpath_site_unlocked';
        var PASS = 'Demo123!'; 

        function createRetroPasswordModal() {
          // Create modal overlay
          var overlay = document.createElement('div');
          overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Press Start 2P', monospace;
          `;

          // Create modal container
          var modal = document.createElement('div');
          modal.style.cssText = `
            background: linear-gradient(135deg, #000000 0%, #1a1a2e 100%);
            border: 3px solid #00ff41;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: modalGlow 2s ease-in-out infinite alternate;
          `;

          // Add glow animation
          var style = document.createElement('style');
          style.textContent = `
            @keyframes modalGlow {
              0% { box-shadow: 0 0 30px rgba(0, 255, 65, 0.5); }
              100% { box-shadow: 0 0 50px rgba(0, 255, 65, 0.8); }
            }
            @keyframes pixelPulse {
              0%, 100% { transform: scale(1); }
              50% { transform: scale(1.05); }
            }
            .pixel-text {
              font-family: 'Press Start 2P', monospace;
              color: #00ff41;
              text-shadow: 0 0 10px rgba(0, 255, 65, 0.8);
            }
            .retro-input {
              background: #000000;
              border: 2px solid #00ff41;
              color: #00ff41;
              padding: 15px;
              font-family: 'Press Start 2P', monospace;
              font-size: 14px;
              border-radius: 8px;
              width: 100%;
              margin: 20px 0;
              text-align: center;
              box-shadow: inset 0 0 10px rgba(0, 255, 65, 0.3);
            }
            .retro-input:focus {
              outline: none;
              box-shadow: 0 0 20px rgba(0, 255, 65, 0.6);
            }
            .retro-button {
              background: linear-gradient(135deg, #00ff41, #4ecdc4);
              border: 2px solid #00ff41;
              color: #000000;
              padding: 15px 30px;
              font-family: 'Press Start 2P', monospace;
              font-size: 12px;
              border-radius: 8px;
              cursor: pointer;
              margin: 10px;
              transition: all 0.3s ease;
              animation: pixelPulse 2s ease-in-out infinite;
            }
            .retro-button:hover {
              background: linear-gradient(135deg, #4ecdc4, #00ff41);
              transform: translateY(-2px);
              box-shadow: 0 5px 15px rgba(0, 255, 65, 0.4);
            }
            .error-message {
              color: #ff6b6b;
              font-size: 10px;
              margin-top: 10px;
              animation: shake 0.5s ease-in-out;
            }
            @keyframes shake {
              0%, 100% { transform: translateX(0); }
              25% { transform: translateX(-5px); }
              75% { transform: translateX(5px); }
            }
          `;
          document.head.appendChild(style);

          // Create content
          modal.innerHTML = `
            <div class="pixel-text" style="font-size: 24px; margin-bottom: 20px;">
              🌱 KIDPATH 🌱
            </div>
            <div class="pixel-text" style="font-size: 14px; margin-bottom: 30px;">
              ACCESS GRANTED
            </div>
            <div class="pixel-text" style="font-size: 10px; margin-bottom: 20px; color: #4ecdc4;">
              Enter security clearance code:
            </div>
            <input type="password" id="passwordInput" class="retro-input" placeholder="••••••••" autocomplete="off">
            <div id="errorMessage" class="error-message" style="display: none;"></div>
            <div style="margin-top: 30px;">
              <button id="submitBtn" class="retro-button">AUTHENTICATE</button>
            </div>
            <div class="pixel-text" style="font-size: 8px; margin-top: 20px; color: #666;">
              Helping Families Walk with Confidence
            </div>
          `;

          overlay.appendChild(modal);
          document.body.appendChild(overlay);

          // Focus input
          var input = document.getElementById('passwordInput');
          input.focus();

          // Handle submit
          function handleSubmit() {
            var password = input.value;
            var errorDiv = document.getElementById('errorMessage');
            
            if (password === PASS) {
              localStorage.setItem(KEY, '1');
              overlay.style.animation = 'fadeOut 0.5s ease-out forwards';
              setTimeout(() => {
                document.body.removeChild(overlay);
                document.head.removeChild(style);
              }, 500);
            } else {
              errorDiv.textContent = '❌ ACCESS DENIED - Invalid credentials';
              errorDiv.style.display = 'block';
              input.value = '';
              input.focus();
              input.style.borderColor = '#ff6b6b';
              setTimeout(() => {
                input.style.borderColor = '#00ff41';
              }, 1000);
            }
          }

          // Event listeners
          document.getElementById('submitBtn').addEventListener('click', handleSubmit);
          input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
              handleSubmit();
            }
          });

          // Add fade out animation
          var fadeStyle = document.createElement('style');
          fadeStyle.textContent = `
            @keyframes fadeOut {
              to { opacity: 0; transform: scale(0.9); }
            }
          `;
          document.head.appendChild(fadeStyle);
        }

        try {
          if (!localStorage.getItem(KEY)) {
            // Wait for fonts to load
            document.addEventListener('DOMContentLoaded', function() {
              // Load Press Start 2P font
              var link = document.createElement('link');
              link.href = 'https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap';
              link.rel = 'stylesheet';
              document.head.appendChild(link);
              
              // Wait a bit for font to load, then show modal
              setTimeout(createRetroPasswordModal, 500);
            });
          }
        } catch (e) {
          // Fallback to basic prompt
          var input = window.prompt('Password:');
          if (input !== PASS) {
            document.write('<style>body{display:none;}</style>');
          }
        }
      })();
    </script>

    <meta charset="UTF-8">
    <link rel="icon" href="/images/favicon..svg" type="image/svg+xml">
    <link rel="shortcut icon" href="/images/favicon..svg">
    <link rel="apple-touch-icon" href="/images/favicon..svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Otomanopee+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sour+Gummy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Knewave&display=swap" rel="stylesheet">
    <title>KidPath - Helping Families Walk with Confidence</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
